<div
	class="file-list-item"
	(click)="onItemClick($event)"
	(dblclick)="showUnlistedPreview($event)"
	[ngClass]="{
		'grid-view': inGridView,
		selected: isSelected,
		'drag-target': isDragTarget,
		'drop-target': isDropTarget,
		dragging: isDragging,
		disabled: item.isPendingAction,
		'public-archive': isPublicArchive
	}"
	(mousedown)="onItemMouseDown($event)"
	(touchstart)="onItemTouchStart($event)"
	(touchend)="onItemTouchEnd($event)"
	(mouseenter)="onItemMouseEnterLeave($event)"
	(mouseleave)="onItemMouseEnterLeave($event, false)"
	(dragenter)="onItemMouseEnterLeave($event)"
	(dragleave)="onItemMouseEnterLeave($event, false)"
	inViewport
	(inViewportAction)="onIntersection($event)"
	[inViewportOptions]="{ threshold: [0], rootMargin: '100px' }"
>
	<ng-container>
		@if (item.isFolder) {
			@if (!inGridView) {
				<div class="file-list-item-folder-icon">
					<i class="material-icons">folder</i>
				</div>
			}
			@if (inGridView) {
				<div
					prBgImage
					[bgSrc]="!showFolderIcon() && getThumbnailPath()"
					[cover]="inGridView"
					class="file-list-item-folder-icon"
				>
					@if (showFolderIcon()) {
						<i class="material-icons">{{ folderContentsType }}</i>
					}
				</div>
			}
		}
		@if (!item.isFolder && isZip) {
			<div class="file-list-item-folder-icon zip-icon">
				<fa-icon [icon]="['fas', 'file-archive']"></fa-icon>
			</div>
		}
		@if (!item.isFolder && !isZip) {
			<div
				prBgImage
				[bgSrc]="!inGridView ? item.thumbURL200 : item.thumbURL500"
				[cover]="inGridView"
			></div>
		}
	</ng-container>
	@if (inGridView && item.isFolder ? item.view : true) {
		<div class="grid-item-type-icon" @ngIfFadeInAnimation>
			<i class="material-icons">{{ item | itemTypeIcon: item.view }}</i>
		</div>
	}
	<div
		[ngClass]="{ 'name-expanded': isNameHovered && isTextOverflowing }"
		class="name"
	>
		<div
			[ngClass]="{ 'public-archive-name-container': isPublicArchive }"
			class="first-row"
		>
			@if (isPublicArchive) {
				<span class="public-archive-date">{{ date }}</span>
			}
			<p
				#name
				class="item-name"
				[ngClass]="{
					'item-name-hovered': isNameHovered,
					'public-archive-name': isPublicArchive
				}"
				(mouseenter)="onMouseOverName()"
				(mouseleave)="onMouseLeaveName()"
			>
				{{ item.displayName }}
			</p>
			@if (!showAccess && item.ShareVOs?.length) {
				<i
					class="ion-md-people"
					@ngIfFadeInAnimation
					[ngbTooltip]="'fileList.icons.share' | prTooltip"
				></i>
			}
		</div>
		<div class="second-row">
			@if (!showAccess || !item.ShareArchiveVO) {
				<span>
					{{ item.displayDT | prDate: item.TimezoneVO : 'date' }}
					@if (item.dataStatus > 0) {
						<span @ngIfFadeInAnimation>{{
							item.displayDT | prDate: item.TimezoneVO : 'time'
						}}</span>
					}
				</span>
			}
			@if (showAccess || item.ShareArchiveVO) {
				<span> Shared by The {{ item.ShareArchiveVO?.fullName }} Archive </span>
			}
		</div>
	</div>
	@if (!showAccess && !inGridView) {
		<div class="type">
			{{ item.type | prConstants | titlecase }}
		</div>
	}
	@if (!showAccess) {
		<div class="date">
			@if (item.dataStatus > 0) {
				<div class="date-top" @ngIfFadeInAnimation>
					{{ item.displayDT | prDate: item.TimezoneVO : 'date' }}
				</div>
			}
			@if (item.dataStatus > 0) {
				<div class="date-bottom" @ngIfFadeInAnimation>
					{{ item.displayDT | prDate: item.TimezoneVO : 'time' }}
				</div>
			}
		</div>
	}
	@if (showAccess && !inGridView) {
		<div class="access">
			{{ item.accessRole | prConstants | titlecase }}
		</div>
	}
	@if (showAccess && !inGridView) {
		<div class="shared-by">
			@if (item.ShareArchiveVO) {
				<div
					class="archive-thumb"
					prBgImage
					[bgSrc]="item.ShareArchiveVO.thumbURL200"
					[cover]="true"
				></div>
				<span>The {{ item.ShareArchiveVO?.fullName }} Archive</span>
			}
		</div>
	}
	@if (allowActions) {
		<div class="actions">
			<button class="right-menu-toggler" (click)="showActions($event)">
				<span
					class="right-menu-toggler-icon right-menu-toggler-icon-dark"
				></span>
			</button>
		</div>
	}
</div>
