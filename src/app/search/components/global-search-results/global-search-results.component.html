<div class="search-box">
	<input
		type="text"
		class="form-control"
		placeholder="Search this archive"
		#searchInput
		[formControl]="formControl"
	/>
	<ion-icon name="search"></ion-icon>
	@if (waiting) {
		<div class="fade-ring-loader" @ngIfFadeInAnimation></div>
	}
</div>
<div class="results">
	@if (tagResults?.length) {
		<div class="result-group">
			<label>Keywords</label>
			<div class="tag-results">
				@for (tag of tagResults; track tag) {
					<div
						class="tag"
						(click)="onTagResultClick(tag)"
						ngbTooltip="Find items with keyword &quot;{{ tag.name }}&quot;"
					>
						{{ tag.name }}
					</div>
				}
			</div>
		</div>
	}
	@if (waiting && !(recordResults || folderResults)) {
		<div class="result-loading">
			<div class="fade-ring-loader"></div>
		</div>
	}
	@if (itemResults) {
		<div class="result-group" @ngIfFadeInAnimation>
			<label>{{ itemResults.length || 'No' }} results</label>
			<div class="item-result-list no-scroll">
				@for (item of itemResults; track resultTrackByFn($index, item)) {
					<div class="item-result-wrapper">
						<div
							class="item-result"
							ngbTooltip="Go to item {{ item.displayName }}"
							(click)="onItemResultClick(item)"
						>
							@if (item.isRecord) {
								<div
									class="item-thumb"
									prBgImage
									[bgSrc]="item.thumbURL200"
									[cover]="true"
								></div>
							}
							@if (item.isFolder) {
								<div class="item-thumb">
									<ion-icon name="folder"></ion-icon>
								</div>
							}
							<div class="item-info">
								<div class="item-name">{{ item.displayName }}</div>
								<div class="item-parent-folder">
									<ion-icon name="folder"></ion-icon>
									{{ item.parentDisplayName }}
								</div>
							</div>
						</div>
					</div>
				}
			</div>
		</div>
	}
</div>
