<!-- @format -->
<div
  class="upload-wrapper"
  [ngClass]="{
    visible: visible,
    fade: useFade,
    'target-folder': isUploadingInNestedFolder
  }"
>
  <div
    class="upload-progress"
    [ngStyle]="{ transform: getProgressTransform() }"
    *ngIf="currentItem"
  ></div>
  <div *ngIf="status === UploadSessionStatus.Start">Connecting...</div>
  <div *ngIf="status === UploadSessionStatus.CreatingFolders">
    Preparing folders...
  </div>
  <div
    class="upload"
    *ngIf="status === UploadSessionStatus.InProgress && currentItem"
  >
    <div *ngIf="!isUploadingInNestedFolder" class="current-file">
      {{ currentItem.file.name }}
    </div>
    <div *ngIf="isUploadingInNestedFolder" class="current-file">
      Uploading {{ currentItem.file.name }} to
      {{ currentItem.parentFolder.displayName }}
    </div>
    <div class="file-count">
      <strong>{{ fileCount.current }}</strong> of
      <strong>{{ fileCount.total }}</strong>
    </div>
  </div>
  <div *ngIf="status === UploadSessionStatus.Done">
    <div [hidden]="fileCount.error">
      <strong>{{ fileCount.completed }}</strong> files uploaded
    </div>
    <div [hidden]="!fileCount.error">
      <strong>{{ fileCount.completed }}</strong> of
      <strong>{{ fileCount.total }}</strong
      >files uploaded
    </div>
  </div>
  <div *ngIf="status === UploadSessionStatus.DefaultError" class="upload">
    <div class="message">
      <strong> Oops, something went wrong! </strong>
      <br />
      <span *ngIf="fileCount.completed"
        >{{ fileCount.completed }} uploaded,
      </span>
      <span *ngIf="fileCount.completed < fileCount.total"
        >{{ fileCount.total - fileCount.completed }} skipped</span
      >
    </div>
  </div>
  <div *ngIf="status === UploadSessionStatus.StorageError" class="upload">
    <div class="message">
      <strong> Out of storage </strong>
      <br />
      <span *ngIf="fileCount.completed"
        >{{ fileCount.completed }} uploaded,
      </span>
      <span *ngIf="fileCount.completed < fileCount.total"
        >{{ fileCount.total - fileCount.completed }} skipped</span
      >
    </div>
  </div>
</div>
